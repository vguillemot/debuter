<!DOCTYPE html>
<html>
<head>
  <title>Entrées et sorties en R</title>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="generator" content="pandoc" />




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <base target="_blank">

  <script type="text/javascript">
    var SLIDE_CONFIG = {
      // Slide settings
      settings: {
                title: 'Entrées et sorties en R',
                        useBuilds: true,
        usePrettify: true,
        enableSlideAreas: true,
        enableTouch: true,
                      },

      // Author information
      presenters: [
            {
        name:  'Vincent Guillemot<br/>Amaury Vaysse' ,
        company: '',
        gplus: '',
        twitter: '',
        www: '',
        github: ''
      },
            ]
    };
  </script>

  <script src="S08input_output_files/header-attrs-2.28/header-attrs.js"></script>
  <link href="S08input_output_files/ioslides-13.5.1/fonts/fonts.css" rel="stylesheet" />
  <link href="S08input_output_files/ioslides-13.5.1/theme/css/default.css" rel="stylesheet" />
  <link href="S08input_output_files/ioslides-13.5.1/theme/css/phone.css" rel="stylesheet" />
  <script src="S08input_output_files/ioslides-13.5.1/js/modernizr.custom.45394.js"></script>
  <script src="S08input_output_files/ioslides-13.5.1/js/prettify/prettify.js"></script>
  <script src="S08input_output_files/ioslides-13.5.1/js/prettify/lang-r.js"></script>
  <script src="S08input_output_files/ioslides-13.5.1/js/prettify/lang-yaml.js"></script>
  <script src="S08input_output_files/ioslides-13.5.1/js/hammer.js"></script>
  <script src="S08input_output_files/ioslides-13.5.1/js/slide-controller.js"></script>
  <script src="S08input_output_files/ioslides-13.5.1/js/slide-deck.js"></script>

  <style type="text/css">

    b, strong {
      font-weight: bold;
    }

    em {
      font-style: italic;
    }

    summary {
      display: list-item;
    }

    details > summary > p:only-child {
      display: inline;
    }

    slides > slide {
      -webkit-transition: all 0.4s ease-in-out;
      -moz-transition: all 0.4s ease-in-out;
      -o-transition: all 0.4s ease-in-out;
      transition: all 0.4s ease-in-out;
    }

    .auto-fadein {
      -webkit-transition: opacity 0.6s ease-in;
      -webkit-transition-delay: 0.4s;
      -moz-transition: opacity 0.6s ease-in 0.4s;
      -o-transition: opacity 0.6s ease-in 0.4s;
      transition: opacity 0.6s ease-in 0.4s;
      opacity: 0;
    }
/* https://github.com/ropensci/plotly/pull/524#issuecomment-468142578 */
slide:not(.current) .plotly.html-widget{
  display: block;
}

    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
            pre > code.sourceCode { white-space: pre; position: relative; }
            pre > code.sourceCode > span { line-height: 1.25; }
            pre > code.sourceCode > span:empty { height: 1.2em; }
            .sourceCode { overflow: visible; }
            code.sourceCode > span { color: inherit; text-decoration: inherit; }
            div.sourceCode { margin: 1em 0; }
            pre.sourceCode { margin: 0; }
            @media screen {
            div.sourceCode { overflow: auto; }
            }
            @media print {
            pre > code.sourceCode { white-space: pre-wrap; }
            pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
            }
            pre.numberSource code
              { counter-reset: source-line 0; }
            pre.numberSource code > span
              { position: relative; left: -4em; counter-increment: source-line; }
            pre.numberSource code > span > a:first-child::before
              { content: counter(source-line);
                position: relative; left: -1em; text-align: right; vertical-align: baseline;
                border: none; display: inline-block;
                -webkit-touch-callout: none; -webkit-user-select: none;
                -khtml-user-select: none; -moz-user-select: none;
                -ms-user-select: none; user-select: none;
                padding: 0 4px; width: 4em;
                color: #aaaaaa;
              }
            pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
            div.sourceCode
              {   }
            @media screen {
            pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
            }
            code span.al { color: #ff0000; font-weight: bold; } /* Alert */
            code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
            code span.at { color: #7d9029; } /* Attribute */
            code span.bn { color: #40a070; } /* BaseN */
            code span.bu { color: #008000; } /* BuiltIn */
            code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
            code span.ch { color: #4070a0; } /* Char */
            code span.cn { color: #880000; } /* Constant */
            code span.co { color: #60a0b0; font-style: italic; } /* Comment */
            code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
            code span.do { color: #ba2121; font-style: italic; } /* Documentation */
            code span.dt { color: #902000; } /* DataType */
            code span.dv { color: #40a070; } /* DecVal */
            code span.er { color: #ff0000; font-weight: bold; } /* Error */
            code span.ex { } /* Extension */
            code span.fl { color: #40a070; } /* Float */
            code span.fu { color: #06287e; } /* Function */
            code span.im { color: #008000; font-weight: bold; } /* Import */
            code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
            code span.kw { color: #007020; font-weight: bold; } /* Keyword */
            code span.op { color: #666666; } /* Operator */
            code span.ot { color: #007020; } /* Other */
            code span.pp { color: #bc7a00; } /* Preprocessor */
            code span.sc { color: #4070a0; } /* SpecialChar */
            code span.ss { color: #bb6688; } /* SpecialString */
            code span.st { color: #4070a0; } /* String */
            code span.va { color: #19177c; } /* Variable */
            code span.vs { color: #4070a0; } /* VerbatimString */
            code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
        
  </style>

  <link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body style="opacity: 0">

<slides>

  <slide class="title-slide segue nobackground">
        <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      
      <p data-config-presenter><!-- populated from slide_config.json --></p>
          </hgroup>
  </slide>

<style>
.forceBreak { -webkit-column-break-after: always; break-after: column; }
</style>

<slide class=""><hgroup><h2>Les formats de fichiers de données</h2></hgroup><article  id="les-formats-de-fichiers-de-données">

<p><img width="25%" src='img/S01rstudio/Rlogo.svg' title=''/> peut lire différents formats de données. Les principaux formats rencontrés sont:<br/>- Fichiers textes à valeurs séparées par un caractère spécial<br/>- Fichiers Excel<br/>- Fichier natif de R (<code>.Rda</code>)</p>

<p>Un utilisateur peut vouloir enregister principalement des:<br/>- données transformées dans R<br/>- résultats d’analyses sous forme de tables<br/>- sorties textes plus complexes<br/>- graphiques.</p>

</article></slide><slide class=""><hgroup><h2>Les exemples…</h2></hgroup><article  id="les-exemples">

<p>… se trouvent dans un <a href='https://vguillemot.github.io/debuter/inst/extdata/data_io.zip' title=''>dossier compressé</a> qui contient les fichiers suivants :</p>

<table class = 'rmdtable'>
<tr class="header">
<th align="left">Nom du fichier</th>
<th align="right">Taille</th>
</tr>
<tr class="odd">
<td align="left">data_io/1.tabular_simple.tsv</td>
<td align="right">4486</td>
</tr>
<tr class="even">
<td align="left">data_io/2.tabular_complex_header.tsv</td>
<td align="right">4608</td>
</tr>
<tr class="odd">
<td align="left">data_io/3.only_one_col</td>
<td align="right">487</td>
</tr>
<tr class="even">
<td align="left">data_io/4.tabular_no_header.tsv</td>
<td align="right">2012</td>
</tr>
<tr class="odd">
<td align="left">data_io/5.data_in_excel.xlsx</td>
<td align="right">17858</td>
</tr>
</table>

</article></slide><slide class=""><hgroup><h2>Tables dans un fichier texte</h2></hgroup><article  id="tables-dans-un-fichier-texte" class="smaller">

<h3>la plus basique: fichier texte avec un séparateur</h3>

<p>exemple:</p>

<pre >nom     groupe  Energie Eau     Proteines       Glucides        Lipides ....
Abricot crus    194     87.1    0.81    9.01    0.25    6.7     1.3     1.7
Abricot secs    1010    24.7    2.88    59.1    0.5     34.3    10.6    8.3
Ananas  exotique        304     81.3    0.94    15.1    0.25    14.9    2.8</pre>

<h3>lecture/ecriture avec les fonctions de bases de R</h3>

<pre class = 'prettyprint lang-r'>fruits &lt;- read.table(file = &quot;data_io/1.tabular_simple.tsv&quot;, header = T, sep = &quot;\t&quot;)
write.table(x = fruits, file = &quot;1.simpletabular.tsv&quot;, quote = F, sep = &quot;\t&quot;, row.names = F)</pre>

<p><font color="red"><b> Attention à ne pas écraser un fichier </b></font></p>

<p><b>⋙</b> Il existe plusieurs variantes selon les fichiers de données</p>

</article></slide><slide class=""><hgroup><h2>avec plusieurs ligne d’en-tête</h2></hgroup><article  id="avec-plusieurs-ligne-den-tête" class="smaller">

<p>exemple:</p>

<pre ># nom : nom du fruit
# groupe : fruit sec, exotique, mangé crus ou en compote
# autres colonnes : valeurs nutritionelles
nom     groupe  Energie Eau     Proteines       Glucides        Lipides ....
Abricot crus    194     87.1    0.81    9.01    0.25    6.7     1.3     1.7
Abricot secs    1010    24.7    2.88    59.1    0.5     34.3    10.6    8.3
Ananas  exotique        304     81.3    0.94    15.1    0.25    14.9    2.8</pre>

<pre class = 'prettyprint lang-r'>fruits &lt;- read.table(file = &quot;2.tabular_complex_header.tsv&quot;, header = T, sep = &quot;\t&quot;, skip=3)</pre>

</article></slide><slide class=""><hgroup><h2>avec une seule colonne</h2></hgroup><article  id="avec-une-seule-colonne" class="smaller">

<p>exemple:</p>

<pre >Abricot
Ananas
Banane
Canneberge
Cerise
Citron
Clementine
CompoteMultiFruits</pre>

<pre class = 'prettyprint lang-r'>fruit_names &lt;- scan(file = &quot;3.only_one_col&quot;, what=character())</pre>

</article></slide><slide class=""><hgroup><h2>sans en-tête</h2></hgroup><article  id="sans-en-tête" class="smaller">

<pre >Abricot crus    194     87.1    0.81    9.01    0.25
Abricot secs    1010    24.7    2.88    59.1    0.5
Ananas  exotique        304     81.3    0.94    15.1    0.25</pre>

<pre class = 'prettyprint lang-r'>fruits &lt;- read.table(
     file = &quot;tabular_noheader.tsv&quot;, 
     col.names = c(&quot;nom&quot;, &quot;groupe&quot;, &quot;Energie&quot;, &quot;Eau&quot;, &quot;Proteines&quot;, &quot;Glucides&quot;, &quot;Lipides&quot;), 
     sep = &quot;\t&quot;
)</pre>

<p>ou</p>

<pre class = 'prettyprint lang-r'>fruits &lt;- read.table(file = &quot;4.tabular_no_header.tsv&quot;, , header = T, sep = &quot;\t&quot;)
names(fruits) &lt;- c(&quot;nom&quot;, &quot;groupe&quot;, &quot;Energie&quot;, &quot;Eau&quot;, &quot;Proteines&quot;, &quot;Glucides&quot;, &quot;Lipides&quot;)</pre>

</article></slide><slide class=""><hgroup><h2>Fichier binaire de R</h2></hgroup><article  id="fichier-binaire-de-r" class="smaller">

<p>Les fichiers utilisés pour pouvoir sauvegarder et reprendre une session R plus tard.</p>

<pre class = 'prettyprint lang-r'>load(&quot;data_io/fruits.RData&quot;)</pre>

<p>cela crée dans la session un ou des objets tels qu’ils ont été sauvegardés.</p>

<p>pour sauvegarder l’objet fruits:</p>

<pre class = 'prettyprint lang-r'>save(fruits, file = &quot;mySave.Rdata&quot;)</pre>

<p>Pour sauvegarder tout une session de travail:</p>

<pre class = 'prettyprint lang-r'>save.image(file = &quot;mySession.RData&quot;)</pre>

<p>ou</p>

<pre class = 'prettyprint lang-r'>q(&quot;yes&quot;)</pre>

</article></slide><slide class=""><hgroup><h2>Lecture de fichier excel</h2></hgroup><article  id="lecture-de-fichier-excel" class="smaller">

<p>Les données peuvent aussi être transmises sous forme d’un classeur excel.<br/>Il faut alors extraire la table d’intérêt dans la feuille qui le contient.</p>

<p>On utilise pour cela le package <code>readxl</code> qui fournis (entre autres) les fonctions</p>

<ul>
<li><code>read_excel</code></li>
<li><code>read_xls</code></li>
<li>et <code>read_xlsx</code></li>
</ul>

<p>Par exemple le classeur <code>data_in_excel</code> contient 3 feuilles:</p>

<pre class = 'prettyprint lang-r'>library(readxl)
read_xlsx(path = &quot;data_io/5.data_in_excel.xlsx&quot;, sheet = &quot;fruits&quot;, skip = 3)</pre>

</article></slide><slide class=""><hgroup><h2>Ecriture de fichiers Excel</h2></hgroup><article  id="ecriture-de-fichiers-excel">

<p>Pour écrire un fichier sous format &ldquo;Excel&rdquo;, on utilise pour cela le package <code>writexl</code>.</p>

<p>Par exemple, on enregistre le tableau <code>fruits_summary</code> dans un fichier <code>fruits_summary.xlsx</code> avec la suite de commandes suivantes :</p>

<pre class = 'prettyprint lang-r'>library(dplyr)
fruits_summary &lt;- fruits %&gt;%
  group_by(groupe) %&gt;%
  summarize(
    MoyenneSucres = mean(Sucres),
    MoyenneLipides = mean(Lipides))

library(writexl)
write_xlsx(fruits_summary, path = &quot;fruits_summary.xlsx&quot;)</pre>

</article></slide><slide class=""><hgroup><h2>Sorties graphiques</h2></hgroup><article  id="sorties-graphiques" class="smaller">

<p>Quand nous voulons sauvegarder un graphe en ligne de commande, nous avons 2 moyens principaux:</p>

<h3>Si le graphe a été généré avec les fonctions de base de R:</h3>

<p>R fournit des fonctions pour enregistrer sous différents formats de fichier image (BMP, JPEG, PNG &amp; TIFF ). Elles fonctionnent toutes dans le même scénario:</p>

<pre class = 'prettyprint lang-r'>png(filename=&quot;monBeauGraph.png&quot;, width = 960, height = 960 ) # remplacer l&#39;affichage
# Code pour generer le graphique
dev.off() # finaliser le fichier</pre>

<p>Attention: suivant les options &ldquo;<code>width</code>&rdquo; et &ldquo;<code>height</code>&rdquo;, les textes et les points ne prendront pas la même place dans le fichier qu’à l’écran.</p>

<h3>Si le graphe a été généré avec les fonctions de ggplot:</h3>

<p><code>ggplot</code> fournit la fonction <code>ggsave.</code> Par exemple, pour sauvegarder un plot enregistré dans la variable &ldquo;<code>g</code>&rdquo;:</p>

<pre class = 'prettyprint lang-r'>ggsave( filename=&quot;monBeauGraph.png, plot=g, device = png)</pre></article></slide>


  <slide class="backdrop"></slide>

</slides>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!-- map slide visiblity events into shiny -->
<script>
  (function() {
    if (window.jQuery) {
       window.jQuery(document).on('slideleave', function(e) {
         window.jQuery(e.target).trigger('hidden');
      });
       window.jQuery(document).on('slideenter', function(e) {
         window.jQuery(e.target).trigger('shown');
      });
    }
    if (window.Shiny) {
      // Initialize slides when this script appears on the page, since it
      // indicates that the <slides> markup has been fully loaded.
      window.loadDeck();
    }
  })();
</script>

</body>
</html>
